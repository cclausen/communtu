<div class="inner0">
<%= render_flash %>
<% if logged_in? %>

<table width="100%">
	<tr><td width="50%">
			<span class="headline">   <%=h @metapackage.name %>
</span> <br />
<font size="-3"><%=t(:view_metapackages_show_0)%><b><%= link_to @metapackage.user.login, user_path(@metapackage.user.id) %></b></font> 
<%=link_to (image_tag("message.png", :alt=>t(:view_metapackages_show_1),:title=>t(:view_metapackages_show_2), :mouseover=>"message_rollover.png",:border=>"0" ), {:controller=>"sent", :action=>"new", :mail_to=>@metapackage.user.id}) %>
</td>
	
<% if !request.env['HTTP_REFERER'].nil? then %>

     <td width="25%"></td>
     <td width="25%" align="right">
       <%= link_to t(:view_metapackages_show_3), request.env['HTTP_REFERER'] %>
	 </td>  
<% end %>
    </tr>
</table>

<p>
  <%= @metapackage.description %>
</p>

<p>
  <b><%=t(:view_metapackages_show_4)%></b>
  <%=h @metapackage.category.name %>
</p>

<p>
  <b><%=t(:view_metapackages_show_5)%></b>
  <%=@metapackage.default_install ? t(:view_metapackages_show_6) : t(:view_metapackages_show_7) %>
</p>
<p>
  <b><%=t(:view_metapackages_show_8)%></b>
  <%= Package.show_license_type(@metapackage.license_type) %>
</p>
<p>
    <b><%=t(:view_metapackages_show_9)%></b>
    <% if @metapackage.is_published? %>
        <%= image_tag("yes.png", :size => "22x22", :border => "0", :title => t(:view_metapackages_show_10), :alt => t(:view_metapackages_show_10))  %>
    <% else %>
        <%= image_tag("no.png", :size => "22x22", :border => "0", :title => t(:view_metapackages_show_12), :alt => t(:view_metapackages_show_12))  %>
    <% end %>
</p>
  
<div style="position:relative; left:480px; top:-30px; height:0px;width:150px;">
<% if logged_in? and (@metapackage.owned_by? current_user or is_admin?) %>
<%=t(:view_metapackages_show_14)%>
<div style="position:relative; top:-22px; left:64px">
  <%= form_tag(metapackage_path(@metapackage) + "/edit_action") %>
    <select id="method" name="method" onchange="this.form.submit()">
        <option value="noop">---</option>
        <option value="edit"><%=t(:view_metapackages_show_15)%></option>
        <option value="pedit"><%=t(:view_metapackages_show_16)%></option>
        
        <% if not @metapackage.is_published? %>
        <option value="publish"><%=t(:view_metapackages_show_17)%></option>
        <% end %>
        <option value="delete"><%=t(:view_metapackages_show_19)%></option>
    </select>
  </form>
  </div>
<% end %>
</div>

<% if logged_in? and (@metapackage.owned_by? current_user or is_admin?) and (not @metapackage.is_published?) %>
<p>  <%=t(:view_metapackages_show_18)%> </p>
<%  end %>

<% if is_admin? %>
<%= link_to t(:view_metapackages_show_20), :action => 'rdepends', :id => @metapackage.id %>
<% end %>

<% if !@metapackage.metapackages.empty? then%>
  <p>
  <b><%=t(:view_metapackages_show_21)%></b><br />
  <ul>
  <% @metapackage.metapackages.each do |m| %>
    <li>
       <%= link_to  m.name, { :controller => :metapackages, :action => :show,\
	  				:id => m.id } %>
    </li>				
  <% end %>
  </ul>
</p>
<% end %>


<hr>
<%= render :partial => "package_list", :locals => { :metapackage => @metapackage, :editable => false, :distribution => @distribution, :derivative =>  @derivative} %>
<%= image_tag("/images/editp.png", :size => "22x22", :border => 0, :title => t(:view_metapackages_show_22), :alt => t(:view_metapackages_show_22)) %> 
<%= link_to t(:view_metapackages_show_22), { :controller => :metapackages, :action => :add_comment, \
	    :id => @metapackage.id } %>
<%= show_comments @metapackage.comments %>
<% else %>
<p><%=t(:view_metapackages_show_25)%></p>
<% end %>
</div>
